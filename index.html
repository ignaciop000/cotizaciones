<!DOCTYPE html>
<html lang="en">


<head>
  <meta charset="utf-8" />
  <link rel="apple-touch-icon" sizes="76x76" href="img/logo-currency.png">
  <link rel="icon" type="image/png" sizes="96x96" href="img/logo-currency.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <title>Tipo de cambio | Argentina</title>

  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
  <meta name="viewport" content="width=device-width" />
  <meta name="title" content="10 años de datos del tipo de cambio del dolar en la Argentina">
  <meta name="keywords" content="dolar, tipo de cambio, data, 10 años, cotizacion, comprar, vender, variaciones del dolar">
  <meta name="description" content="10 años del tipo de cambio del dolar en la Argentina">
    
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <link href="css/animate.min.css" rel="stylesheet"/>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
  <link href="css/themify-icons.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Lobster&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  <link href="css/dolar-dashboard.css" rel="stylesheet"/>

<script>
    var monthNames = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
    var d = new Date();    
</script>

</head>
<body>
    <div class="wrapper">
        <div class="main-panel">
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <div class="row">
                      <div>
                        <img class="logo-currency center-block" src="img/logo-currency.png">
                      </div>
                    </div>
                </div>
            </nav>
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-3 col-sm-12">
                            <div class="card">
                                <div class="content">
                                    <div class="row">
                                        <div class="col-xs-5">
                                            <div class="icon-big icon-warning text-center">
                                                <i class="ti-calendar"></i>
                                            </div>
                                        </div>
                                        <div class="col-xs-7">
                                            <div class="numbers">
                                                <p>Fecha</p>
                                                <span class="dia"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="footer">
                                        <hr />
                                        <div class="stats">
                                            <i class="ti-reload"></i> La cotización todos los días.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12">
                            <div class="card">
                                <div class="content">
                                    <div class="row">
                                        <div class="col-xs-5">
                                            <div class="icon-big icon-success text-center">
                                                <i class="ti-exchange-vertical"></i>
                                            </div>
                                        </div>
                                        <div class="col-xs-7">
                                            <div class="numbers">
                                                <p>Compra</p>
                                                <span class="compra"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="footer">
                                        <hr />
                                        <div class="stats">
                                            <i class="ti-calendar"></i>Última actualización: <span class="dia"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12">
                            <div class="card">
                                <div class="content">
                                    <div class="row">
                                        <div class="col-xs-5">
                                            <div class="icon-big icon-danger text-center">
                                                <i class="ti-exchange-vertical"></i>
                                            </div>
                                        </div>
                                        <div class="col-xs-7">
                                            <div class="numbers">
                                                <p>Venta</p>
                                                <span class="venta"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="footer">
                                        <hr />
                                        <div class="stats">
                                            <i class="ti-calendar"></i>Última actualización: <span class="dia"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-12">
                            <div class="card">
                                <div class="content">
                                    <div class="row">
                                        <div class="col-xs-5">
                                            <div class="icon-big icon-warning text-center">
                                                <i class="ti-arrow-circle-down"></i>
                                            </div>
                                        </div>
                                        <div class="col-xs-7">
                                            <div class="numbers">
                                                <p>Listado completo</p>
                                                <a href="#" id="downloadList" onclick="descarga()"><span>Click aquí</span></a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="footer">
                                        <hr />
                                        <div class="stats">
                                            <i class="ti-reload"></i> Descarga los últimos 10 años.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row dolar-section">
                        <div class="col-md-12">
                            <div class="card dolar-graphic"></div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-12">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <div class="numbers">
                                            <p>Acumulado anual</p>
                                            <svg id="fillgauge1" width="97%" height="250"></svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="footer">
                                    <hr />
                                    <div class="stats">
                                        <i class="ti-calendar"></i> Acumulado en <script>document.write(new Date().getFullYear())</script>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-sm-12">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-5">
                                        <div class="icon-big icon-info text-center diferencia-mensual"></div>
                                    </div>
                                    <div class="col-xs-7">
                                        <div class="numbers">
                                            <p>Acumulado mensual </p>
                                            <span class="porcentaje_mes"></span><span class="porcentaje-simbolo_mes">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="footer">
                                    <hr />
                                    <div class="stats">
                                        <i class="ti-calendar"></i> Acumulado en <script>document.write(monthNames[d.getMonth()])</script>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>                    
                    <div class="col-lg-3 col-sm-12">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                     <div class="col-xs-5">
                                        <div class="icon-big icon-info text-center diferencia-diaria"></div>
                                    </div>
                                    <div class="col-xs-7">
                                        <div class="numbers">
                                            <p>Última actualización</p>
                                            <span class="porcentaje"></span><span class="porcentaje-simbolo">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="footer">
                                    <hr />
                                    <div class="stats">
                                        <i class="ti-calendar"></i>Cotización de hace una hora 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                     <div class="col-lg-3 col-sm-12">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-5">
                                        <div class="icon-big icon-info text-center diferencia-diaria"></div>
                                    </div>
                                    <div class="col-xs-7">
                                        <div class="numbers">
                                            <p>Diferencia diaria</p>
                                            <span class="porcentaje"></span><span class="porcentaje-simbolo">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="footer">
                                    <hr />
                                    <div class="stats">
                                        <i class="ti-calendar"></i> Última actualización: <span class="dia"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-sm-12">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-5">
                                        <div class="icon-big icon-info text-center diferencia-diaria"></div>
                                    </div>
                                    <div class="col-xs-7">
                                        <div class="numbers">
                                            <p>Diferencia diaria</p>
                                            <span class="porcentaje"></span><span class="porcentaje-simbolo">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="footer">
                                    <hr />
                                    <div class="stats">
                                        <i class="ti-calendar"></i> Última actualización: <span class="dia"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> 
                </div> 
            </div>
        </div>
        <footer class="footer">
            <div class="container-fluid">
                <nav class="pull-left social-media">
                    <ul>
                        <li>
                            <a href="https://www.instagram.com/imansilladerqui/" target="_blank">
                                <div class="icon-big text-center">
                                    <i class="ti-instagram"></i>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.linkedin.com/in/imansilladerqui/" target="_blank">
                                <div class="icon-big text-center">
                                    <i class="ti-linkedin"></i>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/imansilladerqui" target="_blank">
                                <div class="icon-big text-center">
                                    <i class="ti-github"></i>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="https://ar.pinterest.com/imansilladerqui/" target="_blank">
                                <div class="icon-big text-center">
                                    <i class="ti-pinterest"></i>
                                </div>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="copyright pull-right">
                    &copy; <script>document.write(new Date().getFullYear())</script>, crafted by <a href="http://www.ignaciomansilladerqui.com/" target="_blank">IMD</a>
                </div>
            </div>
        </footer>
    </div>

<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>
<script src="js/chartist.min.js"></script>
<script src="js/dolar-dashboard.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="js/liquidFillGauge.js"></script>
<script src='js/excelexportjs.js'></script>


<script>

function descarga () {
    d3.json("cotizaciones/data/dolar.json", function(error, data) {
        $(this).excelexportjs({
            datatype: 'json',
            dataset: data,
            columns: getColumns(data)    
        });
    });
}


function formatDate(date) {
  var monthNames = [
    "Enero", "Febrero", "Marzo",
    "Abril", "Mayo", "Junio", "Julio",
    "Agosto", "Septiembre", "Octubre",
    "Noviembre", "Diciembre"];

  var day = date.getDate();
  var monthIndex = date.getMonth();
  var year = date.getFullYear();

  return day + ' ' + monthNames[monthIndex] + ' ' + year;
}

function formatDate2(date) {
  var monthNames = [
    "Enero", "Febrero", "Marzo",
    "Abril", "Mayo", "Junio", "Julio",
    "Agosto", "Septiembre", "Octubre",
    "Noviembre", "Diciembre"];

  var day = date.getDate();
  var monthIndex = date.getMonth();
  var year = date.getFullYear();

  return monthNames[monthIndex] + ' ' + year;
}

// CHART VALOR DOLAR

var widthinner = window.innerWidth - 100;
var heightinner = window.innerHeight;

var parseTime = d3.timeParse("%d-%m-%y");

const margin = { top: 20, right: 20, bottom: 130, left: 50 };
const width = widthinner - margin.left - margin.right;
const height = heightinner - margin.top - margin.bottom;

var x = d3.scaleBand()
  .range([0, width])
  .paddingInner(0.1); // space between bars (it's a ratio)

var y = d3.scaleLinear().range([height, 0]);

var yAxis = d3.axisLeft(y)
    .ticks(10);

const svg = d3.select('.dolar-graphic')
  .append('svg')
  .attr('width', width + margin.left + margin.right)
  .attr('height', height + margin.top + margin.bottom)
  .append('g')
  .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")")

d3.json("cotizaciones/data/dolar.json", function(error, data) {

if (error) throw error;



dia= data.map(function(d) { return d.dia; }).reverse()[0][0];
dia_anterior= data.map(function(d) { return d.dia; }).reverse()[1][0];
compra= data.map(function(d) { return d.cotizacion_compra; }).reverse()[0][0];
compra_anterior = data.map(function(d) { return d.cotizacion_compra; }).reverse()[1][0];
venta= data.map(function(d) { return d.cotizacion_venta; }).reverse()[0][0];
venta_anterior = data.map(function(d) { return d.cotizacion_venta; }).reverse()[1][0];
porcentaje =(((venta - venta_anterior)/venta_anterior)*100).toFixed(2);


$(".dia").append(dia);
$(".dia_anterior").append(dia_anterior);
$(".compra").append(compra);
$(".venta").append(venta);

if ((porcentaje)>0.00) {

    $(".diferencia-diaria").append("<i></i>").addClass('ti-arrow-up');
    $(".porcentaje").append(porcentaje);
    $(".porcentaje").css("color","green");
    $(".porcentaje-simbolo").css("color","green");
    $(".diferencia-diaria").css("color","green");

} else if ((porcentaje) == 0.00){

    $(".diferencia-diaria").append("<i></i>").addClass('ti-arrows-horizontal');
    $(".porcentaje").append(porcentaje);
    $(".porcentaje").css("color","black");
    $(".porcentaje-simbolo").css("color","black");
    $(".diferencia-diaria").css("color","black");

} else {

    $(".diferencia-diaria").append("<i></i>").addClass('ti-arrow-down');
    $(".porcentaje").append(porcentaje);
    $(".porcentaje").css("color","red");
    $(".porcentaje-simbolo").css("color","red");
    $(".diferencia-diaria").css("color","red");
}



var cotizaciones_este_ano = [];
var cotizaciones_este_mes = []; 

data.forEach(function(d) {
    d.dia = parseTime(d.dia[0]);
    d.cotizacion_compra = +d.cotizacion_compra;
    d.cotizacion_venta = +d.cotizacion_venta;


    if (d.dia.getFullYear() == new Date().getFullYear()) {
        cotizaciones_este_ano.push(d.cotizacion_venta);
    }

    if (d.dia.getMonth()+1 == new Date().getMonth()+1 && d.dia.getFullYear() == new Date().getFullYear()) {
        cotizaciones_este_mes.push(d.cotizacion_venta);
    }    

});


var first_element_mes = cotizaciones_este_mes[0];
var last_element_mes = cotizaciones_este_mes[cotizaciones_este_mes.length - 1];
porcentaje_mes =(((last_element_mes - first_element_mes)/first_element_mes)*100).toFixed(2);

if (first_element_mes === 0) {

    $(".diferencia-mensual").append("<i></i>").addClass('ti-split-h');
    porcentaje_mes = 0.00;
    $(".porcentaje_mes").append(porcentaje_mes);
    $(".porcentaje_mes").css("color","red");
    $(".porcentaje-simbolo_mes").css("color","red");
    $(".diferencia-mensual").css("color","red");

} else {
    
    console.log(porcentaje_mes);

    if ((porcentaje_mes)>0.00) {

        $(".diferencia-mensual").append("<i></i>").addClass('ti-arrow-up');
        $(".porcentaje_mes").append(porcentaje_mes);
        $(".porcentaje_mes").css("color","green");
        $(".porcentaje-simbolo_mes").css("color","green");
        $(".diferencia-mensual").css("color","green");

    } else if ((porcentaje_mes) == 0.00){

        $(".diferencia-mensual").append("<i></i>").addClass('ti-arrows-horizontal');
        $(".porcentaje_mes").append(porcentaje_mes);
        $(".porcentaje_mes").css("color","black");
        $(".porcentaje-simbolo_mes").css("color","black");
        $(".diferencia-mensual").css("color","black");

    } else {

        $(".diferencia-mensual").append("<i></i>").addClass('ti-arrow-down');
        $(".porcentaje_mes").append(porcentaje_mes);
        $(".porcentaje_mes").css("color","red");
        $(".porcentaje-simbolo_mes").css("color","red");
        $(".diferencia-mensual").css("color","red");
    }
}


var first_element_ano = cotizaciones_este_ano[0];
var last_element_ano = cotizaciones_este_ano[cotizaciones_este_ano.length - 1];

if (first_element_ano != 0) {
    porcentaje_ano =(((last_element_ano - first_element_ano)/first_element_ano)*100).toFixed(2);
} else {
    porcentaje_ano = 0;
}


if ((porcentaje_ano)>0) {

    d3.select("#fillgauge1").call(d3.liquidfillgauge, porcentaje_ano);
    d3.select("#fillgauge1");

} else {

    d3.select("#fillgauge1").call(d3.liquidfillgauge, porcentaje_ano);
    d3.select("#fillgauge1");
}


x.domain(data.map(function(d) { return d.dia; }));
y.domain([0, d3.max(data, function(d) { return d.cotizacion_venta; })]);

const tooltip = d3.select('body').append('div')
  .attr('class', 'tooltip')
  .style('opacity', 0);

svg.append('g')
  .attr('class', 'x axis')
  .attr('transform', 'translate(0,'+height+')')
  .call(d3.axisBottom(x)
    .tickFormat(d3.timeFormat("%Y")))
  .selectAll("text")
    .style("text-anchor", "end")
    .attr("dx", "-.8em")
    .attr("dy", ".15em")
    .attr("transform", "rotate(-90)" );

var ticks = d3.selectAll(".tick text");

ticks.attr("class", function(d,i){
 if(i%70 != 0) d3.select(this).remove();
});

svg.append('g')
  .attr('class', 'y axis')
  .call(yAxis)
  .append('text')
    .attr('transform', 'rotate(-90)')
    .attr('y', 6)
    .attr('dy', '.71em')
    .style('text-anchor', 'end')

svg.selectAll('.bar')
  .data(data)
  .enter()
  .append('rect')
  .attr('class', 'bar')
  .attr('x', function(d) { return x(d.dia); })
  .attr('width', x.bandwidth())
  .attr("y", function(d) { return y(d.cotizacion_venta); })
  .attr("height", function(d) { return height - y(d.cotizacion_venta); })
  .on('mouseover', (d) => {
    tooltip.transition().duration(50).style('opacity', 0.9);
    tooltip.html('Dia: <span>' + formatDate(d.dia) + '</span><br>'+
      'Precio: <span>'+d.cotizacion_venta+'</span>')
      .style('left', +d3.event.layerX+'px')
      .style('top', +event.clientY-50+'px')
      .style('height', 40+'px');
  })
  .on('mouseout', () => tooltip.transition().style('opacity', 0));
});

</script>

</body>
</html>